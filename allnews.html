<div class="tradingview-widget-container">
    <script type="text/javascript">
    function getParameterByName(name, url) {
    if (!url) {
      url = window.location.href;
    }
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
    const theme = getParameterByName('theme');
    console.log(theme);
    var script_tag = document.createElement('script');
    script_tag.type = 'text/javascript';
    script_tag.src = 'https://s3.tradingview.com/external-embedding/embed-widget-timeline.js';
    script_tag.text = `{
      "feedMode": "all_symbols",
      "colorTheme": "${theme}",
      "isTransparent": true,
      "displayMode": "regular",
      "width": "100%",
      "height": "100%",
      "locale": "en"
    }`;
    document.body.appendChild(script_tag);
    </script>
</div>
